<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>리뷰 작성 - Ewha Market</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  {% include 'navbar.html' %}
  <div class="container fade" style="margin-top:20px;">
    <div class="card" style="padding:30px 40px; border-radius:12px;">
      <h2 style="margin:10px; font-size:30px; font-weight:700;">
        {{ review.title }}
      </h2>

      <p style="margin:15px; color:var(--muted); font-size:15px;">
        작성자: {{ review.name }}
        &nbsp; | &nbsp;
        평점:
        {% if review.rating == '5' %} ★★★★★
        {% elif review.rating == '4' %} ★★★★☆
        {% elif review.rating == '3' %} ★★★☆☆
        {% elif review.rating == '2' %} ★★☆☆☆
        {% else %}★☆☆☆☆{% endif %}
      </p>

      <h3 style="font-size:20px; margin:10px;">관련 상품</h3>

      {% set img = review.image or review.img_path %}
      <div style="display:flex; gap:20px; align-items:flex-start; margin:30px;">
        <div>
          {% if img %}
          <img src="{{ url_for('static', filename='image/' + img) }}"
            style="width:100%; height:250px; object-fit:cover;">
          {% else %}
          <div style="width:100%; height:200px; background:#a1a1a1;
            display:flex; align-items:center; justify-content:center; color:#aaa;"></div>
          {% endif %}
        </div>

        <div style="flex:1; padding:10px;">
          <p style="margin:5px; font-weight:600; font-size:30px;">
            {{ review.product }}
          </p>
        </div>
      </div>

      <div class="card">
        <h3 style="font-size:20px; margin:10px;">리뷰 내용</h3>
        <div style="margin:20px; padding:20px solid; display:flex; align-items:flex-start;">

          <div style="flex:1;">
            <p style="font-size:15px; margin:0 25px 25px 5px;">
              {{ review.content }}
            </p>
          </div>

          {% if img %}
          <div>
            <img src="{{ url_for('static', filename='image/' + img) }}"
              style="width:100%; height:200px;">
          </div>
          {% endif %}
        </div>

        <div style="margin:25px; display:flex; gap:30px;">
          <a href="{{ url_for('review_list') }}" class="btn">리뷰 목록으로</a>
        </div>

      </div>

    </div> 
    <h2 style="margin-top:50px;">최근 리뷰</h2>
    {% if reviews and reviews|length > 0 %}
      {% for r in reviews %}
      <div class="card review-item" onclick="location.href='/review/detail/{{ loop.index0 }}'">
        <h3>{{ r.title }}</h3>
        <p>{{ r.content[:60] }}...</p>
        <p style="color:var(--muted); font-size:14px;">작성자: {{ r.name }} | 평점: {{ r.rating }}</p>
      </div>
      {% endfor %}
    {% else %}
      <p>등록된 리뷰가 없습니다.</p>
    {% endif %}
  </div>
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
